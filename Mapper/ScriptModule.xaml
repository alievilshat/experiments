<Window x:Class="ScriptModule.ScriptModuleWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:ScriptModule.Controls"
        Title="ScriptModule"
        Loaded="ScriptModule_OnLoaded">
    <Window.Resources>
        <Style TargetType="TreeViewItem">
            <Setter Property="Margin" Value="2" />
        </Style>
    </Window.Resources>
    <Window.InputBindings>
        <KeyBinding Command="Play" Key="F5" />
    </Window.InputBindings>
    <Window.CommandBindings>
        <CommandBinding Command="New" Executed="NewScript_Click" />
        <CommandBinding Command="Save" Executed="Save_Click" />
        <CommandBinding Command="Save" Executed="Run_Click" CanExecute="CanRun_Handler" />
    </Window.CommandBindings>
    <DockPanel>
        <ToolBarPanel DockPanel.Dock="Top">
            <ToolBar>
                <MenuItem Header="New" Command="New" />
                <MenuItem Header="Save" Command="Save" />
                <MenuItem Header="Execute" Command="Play" />
            </ToolBar>
        </ToolBarPanel>
        <ListView DockPanel.Dock="Left" MinWidth="120" IsSynchronizedWithCurrentItem="True"
                  ItemsSource="{Binding Scripts}" SelectedItem="{Binding Current}">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <TextBox Text="{Binding ScriptName}" Visibility="{Binding RenameMode, Converter={StaticResource BoolToVisibility}}" />
                        <TextBlock Text="{Binding ScriptName}" Visibility="{Binding RenameMode, Converter={StaticResource InvertBoolToVisibility}}"/>
                    </Grid>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <TreeView DockPanel.Dock="Right" Background="WhiteSmoke">
            <TreeViewItem Header="Input" IsExpanded="True">
                <TreeViewItem Header="Local File System" />
                <TreeViewItem Header="Ftp Location" />
                <TreeViewItem Header="Database" />
            </TreeViewItem>
            <TreeViewItem Header="Converters" IsExpanded="True">
                <TreeViewItem Header="Xml To Csv" />
                <TreeViewItem Header="Csv To Xml" />
            </TreeViewItem>
            <TreeViewItem Header="Scripts" IsExpanded="True">
                <TreeViewItem Header="C# Script" />
                <TreeViewItem Header="XSLT Script" />
            </TreeViewItem>
            <TreeViewItem Header="Output" IsExpanded="True">
                <TreeViewItem Header="Local File System" />
                <TreeViewItem Header="Ftp Location" />
                <TreeViewItem Header="Database" />
            </TreeViewItem>
        </TreeView>
        <TabControl x:Name="DesignerTagControl" TabStripPlacement="Bottom" IsSynchronizedWithCurrentItem="True"
                    DataContext="{Binding Current}" SelectedIndex="{Binding DesignMode}">
            <TabItem Header="Design" Content="{Binding ScriptDesigner}">
            </TabItem>
            <TabItem Header="Source">
                <controls:Editor x:Name="editor" Syntax="xml" Text="{Binding ScriptText, Mode=TwoWay}" />
            </TabItem>
        </TabControl>
    </DockPanel>
</Window>